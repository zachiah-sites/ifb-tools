import{M as r,C as s}from"./vendor-d54525a3.js";import{s as a}from"./supabase-8fb510b0.js";const e=function(){const{subscribe:r,set:e,update:i}=s(a.auth.user());return{subscribe:r,set:e,update:i,async signIn({email:r,password:s}){const{user:i,session:t,error:n}=await a.auth.signIn({email:r,password:s});if(n)throw n;let{error:o}=await a.from("profiles").upsert({username:r,id:i.id},{returning:"minimal"});if(o)throw o;e(i)},async signOut(){const{error:r}=await a.auth.signOut();if(r)throw r;e(await a.auth.user())},async signUp({email:r,password:s}){const{user:i,session:t,error:n}=await a.auth.signUp({email:r,password:s});if(n)throw n;let{error:o}=await a.from("profiles").upsert({username:r,id:i.id},{returning:"minimal"});if(o)throw o;e(i)}}}();r(e,(async r=>{if(!r)return null;let{data:s,error:e,status:i}=await a.from("profiles").select("username").eq("id",r.id).single();if(e)throw e;return s}));export{e as a};
