import{S as t,i as s,s as e,j as a,m as n,o as r,x as o,u as $,v as i,L as c,Q as l,R as u,k as m,n as f,f as g,U as p,d,t as v,g as b}from"../../chunks/vendor-58648dd5.js";import{g as h}from"../../chunks/navigation-20968cc5.js";import{a as w}from"../../chunks/db-2be0537e.js";import{F as y,a as j,B as k}from"../../chunks/FormField-f463cea1.js";import"../../chunks/singletons-bb9012b7.js";import"../../chunks/supabase-96a69e01.js";function x(t){let s;return{c(){s=v("Sign In")},l(t){s=b(t,"Sign In")},m(t,e){g(t,s,e)},d(t){t&&d(s)}}}function S(t){let s,e,c,v,b,h,w,y;function S(s){t[4](s)}let I={required:!0,label:"Email",type:"email"};function F(s){t[5](s)}void 0!==t[0]&&(I.value=t[0]),s=new j({props:I}),l.push((()=>u(s,"value",S)));let q={required:!0,label:"Password",type:"password"};return void 0!==t[1]&&(q.value=t[1]),v=new j({props:q}),l.push((()=>u(v,"value",F))),w=new k({props:{type:"submit",$$slots:{default:[x]},$$scope:{ctx:t}}}),{c(){a(s.$$.fragment),c=m(),a(v.$$.fragment),h=m(),a(w.$$.fragment)},l(t){n(s.$$.fragment,t),c=f(t),n(v.$$.fragment,t),h=f(t),n(w.$$.fragment,t)},m(t,e){r(s,t,e),g(t,c,e),r(v,t,e),g(t,h,e),r(w,t,e),y=!0},p(t,a){const n={};!e&&1&a&&(e=!0,n.value=t[0],p((()=>e=!1))),s.$set(n);const r={};!b&&2&a&&(b=!0,r.value=t[1],p((()=>b=!1))),v.$set(r);const o={};128&a&&(o.$$scope={dirty:a,ctx:t}),w.$set(o)},i(t){y||(o(s.$$.fragment,t),o(v.$$.fragment,t),o(w.$$.fragment,t),y=!0)},o(t){$(s.$$.fragment,t),$(v.$$.fragment,t),$(w.$$.fragment,t),y=!1},d(t){i(s,t),t&&d(c),i(v,t),t&&d(h),i(w,t)}}}function I(t){let s,e;return s=new y({props:{error:t[2],title:"Sign In",$$slots:{default:[S]},$$scope:{ctx:t}}}),s.$on("submit",t[6]),{c(){a(s.$$.fragment)},l(t){n(s.$$.fragment,t)},m(t,a){r(s,t,a),e=!0},p(t,[e]){const a={};4&e&&(a.error=t[2]),131&e&&(a.$$scope={dirty:e,ctx:t}),s.$set(a)},i(t){e||(o(s.$$.fragment,t),e=!0)},o(t){$(s.$$.fragment,t),e=!1},d(t){i(s,t)}}}function F(t,s,e){let a;c(t,w,(t=>e(3,a=t)));let n="",r="",o=null;return t.$$.update=()=>{8&t.$$.dirty&&a&&h(localStorage["goto-after-login"]||"/")},[n,r,o,a,function(t){n=t,e(0,n)},function(t){r=t,e(1,r)},async()=>{try{await w.signIn({email:n,password:r}),h(localStorage["goto-after-sign-in"]||"/")}catch(t){e(2,o=t.message)}}]}export default class extends t{constructor(t){super(),s(this,t,F,I,e,{})}}
